---
interface Props {
  currentPage?: 'dashboard' | 'project'
}

const { currentPage = 'dashboard' } = Astro.props
---

<header class="bg-white border-b border-gray-100 sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-20">
      <!-- Logo et navigation -->
      <div class="flex items-center gap-8">
        <a href="/" class="flex-shrink-0">
          <img src="/images/logo.svg" alt="Loire Digital" class="h-8" width="120" height="32" />
        </a>

        <nav class="hidden md:flex items-center gap-6">
          <a
            href="/espace-client/dashboard"
            class={`text-sm font-semibold transition-colors ${
              currentPage === 'dashboard'
                ? 'text-blue-600'
                : 'text-gray-text hover:text-black'
            }`}
          >
            Dashboard
          </a>
        </nav>
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-4">
        <a href="/contact" class="hidden md:block text-sm font-semibold text-gray-text hover:text-black transition-colors">
          Support
        </a>
        <button
          id="logout-btn"
          class="flex items-center gap-2 px-4 py-2 text-sm font-semibold text-gray-text hover:text-red-600 transition-colors"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
          </svg>
          <span class="hidden md:block">DÃ©connexion</span>
        </button>
      </div>
    </div>
  </div>
</header>

<script>
  const logoutBtn = document.getElementById('logout-btn')
  logoutBtn?.addEventListener('click', async () => {
    try {
      await fetch('/api/auth/logout', { method: 'POST' })
      window.location.href = '/espace-client/connexion'
    } catch (error) {
      console.error('Logout error:', error)
    }
  })
</script>
